<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø·Ù‚Ø³</title>

<style>
/* Ø§Ù„Ø¬Ø³Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ */
body {
    font-family: Arial, sans-serif;
    direction: rtl;
    text-align: right;
    padding: 30px;
    transition: background 0.5s, color 0.5s;
    background: linear-gradient(to right, #74ebd5, #9face6);
    color: #000;
}

/* Ø§Ù„ÙÙˆØ±Ù… */
form {
    text-align: center;
    margin-bottom: 30px;
}

input, button {
    padding: 10px 15px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    margin: 5px;
}

button {
    background-color: #2d89ef;
    color: white;
    cursor: pointer;
}

/* Ø£ÙŠÙ‚ÙˆÙ†Ø© ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ */
.mode-toggle {
    position: fixed;
    top: 15px;
    right: 15px;
    font-size: 24px;
    cursor: pointer;
    z-index: 1000;
}

/* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.weather-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}

/* Ø§Ù„ÙƒØ±ÙˆØª */
.box {
    background: rgba(255,255,255,0.95);
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: background 0.5s, box-shadow 0.5s;
}

/* Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø¨Ù„ÙˆÙ† cyan Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÙŠØ± */
.box h2 {
    margin-top: 0;
    border-bottom: 2px solid #eee;
    padding-bottom: 10px;
    color: cyan;
    background: #111;
    border-radius: 8px;
    padding: 8px 10px;
}

/* Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« Ø£Ø¹Ù„Ù‰ ÙŠØ³Ø§Ø± */
.last-update {
    position: fixed;
    top: 10px;
    left: 15px;
    background: rgba(255,255,255,0.85);
    padding: 5px 10px;
    border-radius: 8px;
    font-size: 13px;
    color: #333;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    direction: rtl;
}

/* Ø£Ù„ÙˆØ§Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡ */
.aqi-green { background-color: #d4edda; border-left: 8px solid #28a745; }
.aqi-yellow { background-color: #fff3cd; border-left: 8px solid #ffc107; }
.aqi-red { background-color: #f8d7da; border-left: 8px solid #dc3545; }

/* Dark Mode */
body.dark {
    background: #111;
    color: #eee;
}

body.dark .box {
    background: #222;
    box-shadow: 0 5px 15px rgba(255,255,255,0.05);
}

body.dark .last-update {
    background: rgba(0,0,0,0.6);
    color: #fff;
}

body.dark .box h2 {
    background: #222;
    color: cyan;
}
</style>

</head>
<body>

<!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ -->
<div class="mode-toggle" onclick="toggleMode()" id="mode-icon">ğŸŒ™</div>

<!-- Ø§Ù„ÙÙˆØ±Ù… -->
<form method="POST">
    {% csrf_token %}
    <input type="text" name="city" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©..." required>
    <button type="submit">Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù‚Ø³</button>
</form>

{% if city_weather %}

<!-- Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ« -->
<div class="last-update">
    ğŸ•’ Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: {{city_weather.last_updated}}
</div>

<div class="weather-container">

    <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <div class="box">
        <h2>ğŸ“ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
        <p>Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: {{city_weather.city}}</p>
        <p>Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©: {{city_weather.region}}</p>
        <p>Ø§Ù„Ø¯ÙˆÙ„Ø©: {{city_weather.country}}</p>
        <p>Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: {{city_weather.lat}}</p>
        <p>Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: {{city_weather.lon}}</p>
        <p>Ø§Ù„ØªÙˆÙ‚ÙŠØª: {{city_weather.tz_id}}</p>
        <p>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ù„ÙŠ: {{city_weather.localtime}}</p>
    </div>

    <!-- Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±Ø© -->
    <div class="box">
        <h2>ğŸŒ¡ï¸ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±Ø©</h2>
        <p>Ø§Ù„Ø­Ø±Ø§Ø±Ø© Â°C: {{city_weather.temp_c}}</p>
        <p>Ø§Ù„Ø­Ø±Ø§Ø±Ø© Â°F: {{city_weather.temp_f}}</p>
        <p>Ø§Ù„Ù…Ø­Ø³ÙˆØ³Ø© Â°C: {{city_weather.feelslike_c}}</p>
        <p>Ø§Ù„Ù…Ø­Ø³ÙˆØ³Ø© Â°F: {{city_weather.feelslike_f}}</p>
    </div>

    <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³ -->
    <div class="box">
        <h2>ğŸŒ¤ï¸ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³</h2>
        <p>Ø§Ù„ÙˆØµÙ: {{city_weather.text}}</p>
        <p>ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„Ø©: {{city_weather.code}}</p>
        <div style="text-align:center; margin-top:10px;">
            <img src="https:{{city_weather.icon}}" alt="Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø·Ù‚Ø³" width="80">
        </div>
    </div>

    <!-- Ø§Ù„Ø±Ø·ÙˆØ¨Ø© ÙˆØ§Ù„Ø³Ø­Ø¨ -->
    <div class="box">
        <h2>ğŸ’§ Ø§Ù„Ø±Ø·ÙˆØ¨Ø© ÙˆØ§Ù„Ø³Ø­Ø¨</h2>
        <p>Ø§Ù„Ø±Ø·ÙˆØ¨Ø©: {{city_weather.humidity}}%</p>
        <p>Ø§Ù„Ø³Ø­Ø¨: {{city_weather.cloud}}%</p>
    </div>

    <!-- Ø§Ù„Ø£Ù…Ø·Ø§Ø± ÙˆØ§Ù„Ø¶ØºØ· -->
    <div class="box">
        <h2>ğŸŒ§ï¸ Ø§Ù„Ø£Ù…Ø·Ø§Ø± ÙˆØ§Ù„Ø¶ØºØ·</h2>
        <p>ÙƒÙ…ÙŠØ© Ø§Ù„Ø£Ù…Ø·Ø§Ø±: {{city_weather.precip_mm}} Ù…Ù…</p>
        <p>Ø§Ù„Ø¶ØºØ· Ø§Ù„Ø¬ÙˆÙŠ: {{city_weather.pressure_mb}} Ù…Ù„ÙŠØ¨Ø§Ø±</p>
    </div>

    <!-- Ø§Ù„Ø±Ø¤ÙŠØ© Ùˆ UV -->
    <div class="box">
        <h2>ğŸ‘ï¸ Ø§Ù„Ø±Ø¤ÙŠØ© ÙˆØ§Ù„Ø£Ø´Ø¹Ø©</h2>
        <p>Ù…Ø¯Ù‰ Ø§Ù„Ø±Ø¤ÙŠØ©: {{city_weather.vis_km}} ÙƒÙ…</p>
        <p>Ù…Ø¤Ø´Ø± UV: {{city_weather.uv}}</p>
    </div>

    <!-- Ø¬ÙˆØ¯Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡ -->
    <div class="box aqi-{{city_weather.aqi_color}}">
        <h2>ğŸŒ«ï¸ Ø¬ÙˆØ¯Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡</h2>
        <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> {{city_weather.epa_text}}</p>
        <p style="margin-top:10px; font-weight:bold;">
            {{city_weather.aqi_description}}
        </p>
        <hr>
        <p>Ø£ÙˆÙ„ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ† <span dir="ltr">"CO"</span> : {{city_weather.co}}</p>
        <p>Ø«Ø§Ù†ÙŠ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ† <span dir="ltr">"NO2"</span> : {{city_weather.no2}}</p>
        <p>Ø§Ù„Ø£ÙˆØ²ÙˆÙ† Ø§Ù„Ø£Ø±Ø¶ÙŠ <span dir="ltr">"O3"</span> : {{city_weather.o3}}</p>
        <p>Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ø¬Ø¯Ù‹Ø§ <span dir="ltr">"PM2.5"</span> : {{city_weather.pm2_5}}</p>
        <p>Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© <span dir="ltr">"PM10"</span> : {{city_weather.pm10}}</p>
    </div>

</div>

<script>
/* Ø¯Ø§Ø±Ùƒ Ù…ÙˆØ¯ */
function toggleMode() {
    document.body.classList.toggle('dark');
    var icon = document.getElementById('mode-icon');
    icon.textContent = document.body.classList.contains('dark') ? 'â˜€ï¸' : 'ğŸŒ™';
}
</script>

{% else %}
<h3 style="text-align:center; color:red;">{{error}}</h3>
{% endif %}

</body>
</html>
